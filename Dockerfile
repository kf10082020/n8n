# ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Node.js —Å Debian slim
FROM node:18-bullseye-slim

# üßæ –û–±–Ω–æ–≤–ª—è–µ–º –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –æ–¥–Ω–æ–º —Å–ª–æ–µ
RUN apt-get update && \
  apt-get install -y --no-install-recommends \
    ffmpeg \
    curl \
    git \
    build-essential \
    cmake \
    python3 \
  && apt-get clean && rm -rf /var/lib/apt/lists/*

# üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ n8n –≥–ª–æ–±–∞–ª—å–Ω–æ
RUN npm install -g n8n

# üìÇ –°–æ–∑–¥–∞—ë–º –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /data

# üê≥ –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç n8n
EXPOSE 5678

# üì¶ –î–æ–±–∞–≤–ª—è–µ–º volume (–ø–æ –∂–µ–ª–∞–Ω–∏—é, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä stateful)
VOLUME ["/data"]

# üöÄ –ö–æ–º–∞–Ω–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
CMD ["n8n"]
